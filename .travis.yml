language: python
python:
  - 2.7
services:
  -postgresql
# command to set up database
before_script:
  - psql -c "CREATE DATABASE test_db;" -U postgres
  - export TZ=Africa/Nairobi
env:
  global:
    - DATABASE_URL=postgresql://postgres:challenge123@localhost/test_db
    - FLASK_APP="run.py"
    - SECRET="yguhijokldisuoiycnbnnhgjhjkdshgjhhggcvjhbkkuycghjkjljkhjghvbdgyfenkdkvsfvmvjhhvfmnvjfbvvnfdhbfdnvhbvfmvbddnmfbv"
    - APP_SETTINGS="development"
# command to install dependencies
install:
  - pip install -r requirements.txt
notifications:
    email: false
# command to run tests
script: nosetests tests --with-coverage && coverage report

after_success: coveralls
